# Modern.js Builder

Este capÃ­tulo apresenta como migrar um projeto Modern.js Builder (ou EdenX Builder) para o Rsbuild.

## Principais diferenÃ§as

O Rsbuild Ã© a nova versÃ£o do Modern.js Builder, com as seguintes principais diferenÃ§as:

- O Rsbuild tem melhor desempenho. Ao usar o Rspack simultaneamente, **a velocidade de inicializaÃ§Ã£o e a velocidade de build do Rsbuild sÃ£o de 1.5 a 2 vezes mais rÃ¡pidas que o Builder**.
- O Rsbuild suporta apenas o Rspack como empacotador e nÃ£o suporta mais o webpack.
- A ferramenta CLI e o servidor de desenvolvimento do Rsbuild sÃ£o mais poderosos e suportam mais recursos.

## Instalando dependÃªncias

Primeiro, vocÃª precisa substituir as dependÃªncias npm relacionadas ao Builder pelas dependÃªncias do Rsbuild.

import { PackageManagerTabs } from '@theme';

- Remover dependÃªncias do Builder:

<PackageManagerTabs command="remove @modern-js/builder-cli @modern-js/builder-webpack-provider @modern-js/builder-rspack-provider" />

- Instalar dependÃªncias do Rsbuild:

<PackageManagerTabs command="add @rsbuild/core -D" />

## Atualizando scripts npm

Em seguida, vocÃª precisa atualizar os scripts npm no package.json para os comandos CLI do Rsbuild.

```json title="package.json"
{
  "scripts": {
    "dev": "builder dev", // [!code --]
    "build": "builder build", // [!code --]
    "serve": "builder serve", // [!code --]
    "dev": "rsbuild dev", // [!code ++]
    "build": "rsbuild build", // [!code ++]
    "preview": "rsbuild preview" // [!code ++]
  }
}
```

## Modificando arquivos de configuraÃ§Ã£o

- Renomeie `builder.config.ts` para `rsbuild.config.ts`.
- Altere a importaÃ§Ã£o do mÃ©todo `defineConfig` de `@modern-js/builder-cli` para `@rsbuild/core`.
- Altere o campo `builderPlugins` para `plugins`.

```ts title="rsbuild.config.ts"
import { defineConfig } from '@modern-js/builder-cli'; // [!code --]
import { defineConfig } from '@rsbuild/core'; // [!code ++]

export default defineConfig({
  builderPlugins: [], // [!code --]
  plugins: [], // [!code ++]
});
```

## Substituindo plugins

O Rsbuild e o Builder possuem sistemas de plugins incompatÃ­veis, entÃ£o vocÃª precisa substituir os plugins do Builder pelos plugins do Rsbuild.

A tabela a seguir mostra a correspondÃªncia entre os plugins do Builder e os plugins do Rsbuild:

| Builder                                  | Rsbuild                                                                                           |
| :--------------------------------------- | :------------------------------------------------------------------------------------------------ |
| @modern-js/builder-plugin-vue            | [@rsbuild/plugin-vue](/plugins/list/plugin-vue)                                                   |
| @modern-js/builder-plugin-vue2           | [@rsbuild/plugin-vue2](https://github.com/rspack-contrib/rsbuild-plugin-vue2)                     |
| @modern-js/builder-plugin-stylus         | [@rsbuild/plugin-stylus](/plugins/list/plugin-stylus)                                             |
| @modern-js/builder-plugin-node-polyfill  | [@rsbuild/plugin-node-polyfill](https://github.com/rspack-contrib/rsbuild-plugin-node-polyfill)   |
| @modern-js/builder-plugin-image-compress | [@rsbuild/plugin-image-compress](https://github.com/rspack-contrib/rsbuild-plugin-image-compress) |
| @modern-js/builder-plugin-swc            | Habilitado por padrÃ£o, nÃ£o Ã© necessÃ¡rio usar                                                      |
| @modern-js/builder-plugin-esbuild        | NÃ£o Ã© mais suportado                                                                              |

Por exemplo, se vocÃª estava usando `@modern-js/builder-plugin-vue`, vocÃª precisa primeiro instalar `@rsbuild/plugin-vue`, entÃ£o importar o plugin em `rsbuild.config.ts` e adicionÃ¡-lo ao campo `plugins`.

```ts title="rsbuild.config.ts"
import { builderPluginVue } from '@modern-js/builder-plugin-vue'; // [!code --]
import { pluginVue } from '@rsbuild/plugin-vue'; // [!code ++]

export default defineConfig({
  builderPlugins: [builderPluginVue()], // [!code --]
  plugins: [pluginVue()], // [!code ++]
});
```

## Adicionar plugins relacionados ao React

O Rsbuild nÃ£o Ã© acoplado a nenhum framework de UI front-end. Portanto, se vocÃª Ã© um projeto React, precisa adicionar manualmente [React Plugin](/plugins/list/plugin-react):

```ts title="rsbuild.config.ts"
export default {
  plugins: [pluginReact()],
};
```

Se vocÃª estiver usando SVGR em seu projeto atual, tambÃ©m precisarÃ¡ registrar [SVGR Plugin](/plugins/list/plugin-svgr):

```ts title="rsbuild.config.ts"
export default {
  plugins: [pluginSvgr()],
};
```

Se vocÃª Ã© um usuÃ¡rio de outros frameworks, pode consultar [Lista de Plugins do Rsbuild](/plugins/list/index) para selecionar o plugin de framework correspondente.

## MigraÃ§Ã£o de configuraÃ§Ã£o

A maioria das configuraÃ§Ãµes no Rsbuild e no Builder sÃ£o consistentes, com apenas alguns ajustes.

You can refer to the [Rsbuild options](/config/index) to view the configs of Rsbuild.

Ã‰ importante notar que, em comparaÃ§Ã£o com o Builder, **existem algumas diferenÃ§as nos valores padrÃ£o e comportamentos no Rsbuild**:

- **Browserslist:** O padrÃ£o Ã© compatÃ­vel minimamente com navegadores que suportam [MÃ³dulos ES Nativos](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules), consulte [Browserslist PadrÃ£o](/guide/advanced/browserslist#default-browserslist).
- **Caminho de saÃ­da do arquivo HTML:** saÃ­da padrÃ£o para a raiz do diretÃ³rio dist, consulte [Estrutura de DiretÃ³rio PadrÃ£o](/guide/basic/output-files#default-directory-structure).
- **MÃ©todo de injeÃ§Ã£o de Polyfill:** Injetar sob demanda por padrÃ£o, consulte [output.polyfill](/config/output/polyfill).
- **VerificaÃ§Ã£o de tipo TypeScript:** nÃ£o habilitado por padrÃ£o, vocÃª precisa registrar manualmente o [@rsbuild/plugin-type-check](https://github.com/rspack-contrib/rsbuild-plugin-type-check).
- **Modificar configuraÃ§Ã£o do DevServer:** Modifique as configuraÃ§Ãµes `dev` e `server` em vez disso.

## Validando resultados

ApÃ³s concluir as etapas acima, vocÃª migrou do Modern.js Builder para o Rsbuild. Agora vocÃª pode tentar iniciar o servidor de desenvolvimento executando o comando `npm run dev`.

Se vocÃª encontrar algum problema durante o processo de build, depure de acordo com os logs de erro.

## Suplemento de conteÃºdo

O documento atual cobre apenas parte do processo de migraÃ§Ã£o. Se vocÃª encontrar conteÃºdo adequado para adicionar, sinta-se Ã  vontade para contribuir com a documentaÃ§Ã£o via pull request ğŸ¤.

> A documentaÃ§Ã£o para rsbuild can be found in the [rsbuild/website](https://github.com/web-infra-dev/rsbuild/tree/main/website) directory.
