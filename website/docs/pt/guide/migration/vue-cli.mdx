# Vue CLI

Este capÃ­tulo apresenta como migrar um projeto [Vue CLI](https://github.com/vuejs/vue-cli) para o Rsbuild.

## Instalar dependÃªncias

Primeiro, vocÃª precisa substituir as dependÃªncias npm do Vue CLI pelas dependÃªncias do Rsbuild.

import { PackageManagerTabs } from '@theme';

- Remover dependÃªncias do Vue CLI:

<PackageManagerTabs command="remove @vue/cli-service @vue/cli-plugin-babel @vue/cli-plugin-eslint core-js" />

- Instalar dependÃªncias do Rsbuild:

<PackageManagerTabs command="add @rsbuild/core @rsbuild/plugin-vue -D" />

:::tip
Se o seu projeto for baseado em Vue 2, substitua `@rsbuild/plugin-vue` por `@rsbuild/plugin-vue2`.
:::

## Atualizar scripts npm

Em seguida, vocÃª precisa atualizar os scripts npm no arquivo package.json para os comandos CLI do Rsbuild.

```json title="package.json"
{
  "scripts": {
    "serve": "vue-cli-service serve", // [!code --]
    "build": "vue-cli-service build", // [!code --]
    "serve": "rsbuild dev", // [!code ++]
    "build": "rsbuild build", // [!code ++]
    "preview": "rsbuild preview" // [!code ++]
  }
}
```

:::tip
O Rsbuild nÃ£o integra ESLint, entÃ£o ele nÃ£o fornece um comando para substituir `vue-cli-service lint`. VocÃª pode usar diretamente os [comandos CLI](https://eslint.org/docs/latest/use/command-line-interface) do ESLint como uma alternativa.
:::

## Criar arquivo de configuraÃ§Ã£o

Crie um arquivo de configuraÃ§Ã£o do Rsbuild `rsbuild.config.ts` no mesmo diretÃ³rio do package.json e adicione o seguinte conteÃºdo:

```typescript
import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';

export default defineConfig({
  plugins: [pluginVue()],
  source: {
    // Especifique o arquivo de entrada
    entry: {
      index: './src/main.js',
    },
  },
});
```

:::tip
Se o seu projeto for baseado em Vue 2, use `import { pluginVue2 } from '@rsbuild/plugin-vue2';`.
:::

## Template HTML

O Vue CLI usa o arquivo `public/index.html` como o template HTML padrÃ£o. No Rsbuild, vocÃª pode especificar o template HTML atravÃ©s de [html.template](/config/html/template):

```ts title="rsbuild.config.ts"
export default defineConfig({
  html: {
    template: './public/index.html',
  },
});
```

No template HTML, se vocÃª estiver usando a variÃ¡vel `BASE_URL` do Vue CLI, substitua-a pela [variÃ¡vel assetPrefix](/config/html/template-parameters) do Rsbuild e use uma barra para concatenaÃ§Ã£o:

```html
<link rel="icon" href="<%= BASE_URL %>favicon.ico" />
<!-- [!code --] -->
<link rel="icon" href="<%= assetPrefix %>/favicon.ico" />
<!-- [!code ++] -->
```

Isso completa a migraÃ§Ã£o bÃ¡sica do Vue CLI para o Rsbuild. Agora vocÃª pode executar o comando `npm run serve` para tentar iniciar o servidor de desenvolvimento.

## MigraÃ§Ã£o de configuraÃ§Ã£o

Hera is the corresponding Rsbuild configuration for Vue CLI configuration:

| Vue CLI                                                                                                                                 | Rsbuild                                                                                                                                                |
| :-------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |
| [publicPath](https://cli.vuejs.org/config/#publicpath)                                                                                  | [dev.assetPrefix](/config/dev/asset-prefix) / [output.assetPrefix](/config/output/asset-prefix)                                                        |
| [outputDir](https://cli.vuejs.org/config/#outputdir) / [assetsDir](https://cli.vuejs.org/config/#assetsdir)                             | [output.distPath](/config/output/dist-path)                                                                                                            |
| [filenameHashing](https://cli.vuejs.org/config/#filenamehashing)                                                                        | [output.filenameHash](/config/output/filename-hash)                                                                                                    |
| [pages](https://cli.vuejs.org/config/#pages)                                                                                            | [source.entry](/config/source/entry) / [html.template](/config/html/template) / [html.title](/config/html/title)                                       |
| [transpileDependencies](https://cli.vuejs.org/config/#transpiledependencies)                                                            | [source.include](/config/source/include)                                                                                                               |
| [productionSourceMap](https://cli.vuejs.org/config/#productionsourcemap) / [css.sourceMap](https://cli.vuejs.org/config/#css-sourcemap) | [output.sourceMap](/config/output/source-map)                                                                                                          |
| [crossorigin](https://cli.vuejs.org/config/#crossorigin)                                                                                | [html.crossorigin](/config/html/crossorigin)                                                                                                           |
| [configureWebpack](https://cli.vuejs.org/config/#configurewebpack)                                                                      | [tools.rspack](/config/tools/rspack)                                                                                                                   |
| [chainWebpack](https://cli.vuejs.org/config/#chainwebpack)                                                                              | [tools.bundlerChain](/config/tools/bundler-chain)                                                                                                      |
| [css.extract](https://cli.vuejs.org/config/#css-extract)                                                                                | [output.injectStyles](/config/output/inject-styles)                                                                                                    |
| [css.loaderOptions](https://cli.vuejs.org/config/#css-loaderoptions)                                                                    | [tools.cssLoader](/config/tools/css-loader) / [less](/plugins/list/plugin-less) / [sass](/plugins/list/plugin-sass) / [postcss](/config/tools/postcss) |
| [devServer.proxy](https://cli.vuejs.org/config/#devserver-proxy)                                                                        | [server.proxy](/config/server/proxy)                                                                                                                   |

Notas:

- Ao migrar `configureWebpack`, observe que a maioria das configuraÃ§Ãµes do webpack e do Rsbuild sÃ£o as mesmas, mas tambÃ©m existem algumas diferenÃ§as ou funcionalidades nÃ£o implementadas no Rsbuild.
- A tabela acima nÃ£o cobre todas as configuraÃ§Ãµes do Vue CLI, sinta-se Ã  vontade para adicionar mais.

## VariÃ¡veis de ambiente

O Vue CLI injeta variÃ¡veis de ambiente que comeÃ§am com `VUE_APP_` no cÃ³digo do cliente por padrÃ£o, enquanto o Rsbuild injeta variÃ¡veis de ambiente que comeÃ§am com `PUBLIC_` por padrÃ£o (consulte [variÃ¡veis pÃºblicas](/guide/advanced/env-vars#public-variables)).

Para ser compatÃ­vel com o comportamento do Vue CLI, vocÃª pode chamar manualmente o mÃ©todo [loadEnv](/api/javascript-api/core#loadenv) do Rsbuild para ler variÃ¡veis de ambiente que comeÃ§am com `VUE_APP_` e injetÃ¡-las no cÃ³digo do cliente atravÃ©s da configuraÃ§Ã£o [source.define](/config/source/define).

```ts title="rsbuild.config.ts"
import { defineConfig, loadEnv } from '@rsbuild/core';

const { publicVars } = loadEnv({ prefixes: ['VUE_APP_'] });

export default defineConfig({
  source: {
    define: publicVars,
  },
});
```

## Suplemento de conteÃºdo

O documento atual cobre apenas parte do processo de migraÃ§Ã£o. Se vocÃª encontrar conteÃºdo adequado para adicionar, sinta-se Ã  vontade para contribuir com a documentaÃ§Ã£o via pull request ğŸ¤.

> A documentaÃ§Ã£o para rsbuild can be found in the [rsbuild/website](https://github.com/web-infra-dev/rsbuild/tree/main/website) directory.
