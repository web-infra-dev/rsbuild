`onBeforeEnvironmentCompile` 是在执行单个 environment 的构建前触发的回调函数。

你可以通过 `bundlerConfig` 参数获取到当前 environment 对应的 [Rspack 配置](https://rspack.dev/zh/config/)。

另外，你可以通过 `isWatch` 判断是否是 dev 或者 build watch 模式，并在 watch 模式下通过 `isFirstCompile` 来判断是否为首次构建。

- **类型：**

```ts
function OnBeforeEnvironmentCompile(
  callback: (params: {
    isWatch: boolean;
    isFirstCompile: boolean;
    bundlerConfig?: Rspack.Configuration;
    environment: EnvironmentContext;
  }) => Promise<void> | void,
): void;
```
