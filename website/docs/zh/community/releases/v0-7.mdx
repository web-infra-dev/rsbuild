---
published_at: 2024-05-23 18:00:00
---

# Rsbuild v0.7 发布

> May 23, 2024

![](https://assets.rspack.dev/rsbuild/rsbuild-banner-with-storybook.png)

Rsbuild v0.7 已与 Rspack v0.7 同步发布！

主要变更：

- TODO

## Storybook

TODO

## 更好的 CSS 支持

Rsbuild 现在使用 [CssExtractRspackPlugin](https://www.rspack.dev/plugins/rspack/css-extract-rspack-plugin) 来提取 CSS 到单独的文件中，而不是使用 `experimental.css` 配置来实现。

这允许 Rsbuild 支持更多 CSS 特性，包括：

- 支持在 Vue SFC 中使用 `<style module>`：

```html title="index.vue"
<template>
  <p :class="$style.red">Red</p>
</template>

<style module>
  .red {
    color: red;
  }
</style>
```

- 支持复杂的 CSS Modules `:global()` 语法

```css title="style.module.css"
:local(.parent):global(.child) > ul {
  color: red;
}
```

- 支持更多的 CSS Modules 选项，如 [cssModules.exportGlobals](/config/output/css-modules#cssmodulesexportglobals)
- 现在你可以使用 [tools.cssExtract](/config/tools/css-extract) 来配置 CssExtractRspackPlugin。

## ESM/CJS 导出

现在，Rsbuild 的所有包均提供了 ES modules 和 CommonJS 两种格式的导出，并在 package.json 中声明了 `"type"="module"`。

这使你能够使用 `import` 或 `require` 来使用 Rsbuild 的 JavaScript API：

```js
// ES Modules
import { createRsbuild } from '@rsbuild/core';

// CommonJS
const { createRsbuild } = require('@rsbuild/core');
```

ESM/CJS 互操作是一个棘手的问题，因此我们计划长期提供这两种格式，以便于更多用户使用。

## output.dataUriLimit 默认值

[output.dataUriLimit](/config/output/data-uri-limit) 的默认值从 `10000 (10kB)` 调整为 `4096 (4KiB)`.

这是因为目前更多的应用正在使用 HTTP 2.0，所以将资源分割成单独的文件会表现得更好。而且将超过 4KiB 的资源内联可能会使 JS 包体积过大，不利于缓存。

如果你倾向于之前的默认设置，可以添加以下配置：

```js title="rsbuild.config.ts"
export default {
  output: {
    dataUriLimit: 10000,
  },
};
```
