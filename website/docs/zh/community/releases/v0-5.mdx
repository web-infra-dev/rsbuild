---
published_at: 2024-03-19 08:00:00
---

_March 19, 2024_

# Rsbuild 0.5 å‘å¸ƒ

![](https://assets.rspack.rs/rsbuild/rsbuild-banner-v0-5.png)

Rsbuild 0.5 æ˜¯ä¸€ä¸ªé‡è¦çš„é‡Œç¨‹ç¢‘ï¼Œä»è¯¥ç‰ˆæœ¬å¼€å§‹ï¼ŒRsbuild çš„ç»å¤§éƒ¨åˆ† API å·²ç»è¾¾åˆ°ç¨³å®šçŠ¶æ€ï¼Œæˆ‘ä»¬é¢„è®¡åœ¨ 2024 å¹´ Q3 å‘å¸ƒ Rsbuild v1.0ã€‚

ä¸»è¦å˜æ›´ï¼š

- âš¡ï¸ æ”¯æŒå¯ç”¨ [Lightning CSS](https://lightningcss.dev/) ä»¥åŠ é€Ÿ CSS ç¼–è¯‘ã€‚
- ğŸŒŸ æ”¯æŒåŸºäºæ–°çš„ JavaScript API å®ç°è‡ªå®šä¹‰ serverã€‚
- ğŸ­ é‡æ„ SVGR æ’ä»¶ä»¥æ”¯æŒæ›´ä¸°å¯Œçš„ç”¨æ³•ã€‚
- ğŸ“ æ”¯æŒè‡ªå®šä¹‰å‹ç¼©é€‰é¡¹ã€‚

## âš¡ï¸ æ”¯æŒ Lightning CSS

Lightning CSS æ˜¯ä¸€ä¸ªåŸºäº Rust ç¼–å†™çš„é«˜æ€§èƒ½ CSS è§£æã€è½¬è¯‘å’Œå‹ç¼©å·¥å…·ã€‚å®ƒæ”¯æŒå°†è®¸å¤šç°ä»£çš„ CSS ç‰¹æ€§è§£æå¹¶è½¬åŒ–ä¸ºæŒ‡å®šæµè§ˆå™¨æ”¯æŒçš„è¯­æ³•ï¼Œå¹¶æä¾›æ›´å¥½çš„å‹ç¼©æ¯”ä¾‹ã€‚

Rsbuild æä¾›äº† Lightning CSS æ’ä»¶ï¼Œç”¨äºæŒ‰éœ€å¼€å¯ Lightning CSS èƒ½åŠ›ï¼Œå¹¶æ›¿ä»£ Rsbuild å†…ç½®çš„ PostCSSã€autoprefixer å’Œ SWC CSS minimizerã€‚

åªéœ€è¦åœ¨ Rsbuild é…ç½®ä¸­æ³¨å†Œ Lightning CSS æ’ä»¶ï¼Œå³å¯å®Œæˆåˆ‡æ¢ï¼š

```ts title="rsbuild.config.ts"
import { pluginLightningcss } from '@rsbuild/plugin-lightningcss';

export default {
  plugins: [pluginLightningcss()],
};
```

åœ¨ä¸€ä¸ªçœŸå®çš„å¤§å‹ Web åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ¥å…¥äº† Rsbuild Lightning CSS æ’ä»¶ï¼Œå¹¶ä½¿ç”¨ [Rsdoctor](https://rsdoctor.rs/) åˆ†ææ„å»ºè€—æ—¶çš„å˜åŒ–ï¼š

- CSS ç¼–è¯‘è€—æ—¶ç”± 8.4s é™ä½åˆ° 0.12sï¼Œæå‡ 70 å€ã€‚
- æ•´ä½“æ„å»ºè€—æ—¶ç”± 33.1s é™ä½åˆ° 25.4sï¼Œæå‡ 30%ã€‚

## ğŸŒŸ æ”¯æŒè‡ªå®šä¹‰ Server

Rsbuild ç°åœ¨æ”¯æŒå°† dev server æ›¿æ¢ä¸ºè‡ªå®šä¹‰çš„ serverï¼Œå¹¶å¤ç”¨ Rsbuild æä¾›çš„é¡µé¢é¢„è§ˆã€è·¯ç”±ã€æ¨¡å—çƒ­æ›´æ–°ç­‰åŠŸèƒ½ã€‚è¿™å°†ä½¿å¾— Rsbuild ä¸å…¶ä»– Node.js æ¡†æ¶ç»“åˆä½¿ç”¨å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

æ¯”å¦‚åŸºäº express å®ç°è‡ªå®šä¹‰ serverï¼š

```ts
import express from 'express';
import { createRsbuild } from '@rsbuild/core';

async function startCustomServer() {
  const app = express();
  const rsbuild = await createRsbuild({
    rsbuildConfig: {
      server: {
        middlewareMode: true,
      },
    },
  });
  const { port, middlewares } = await rsbuild.createDevServer();

  app.use(middlewares);
  app.listen(port);
}
```

è¯¦æƒ…å¯å‚è€ƒ [Rsbuild - createDevServer](/api/javascript-api/instance#rsbuildcreatedevserver)ã€‚

## ğŸ­ é‡æ„ SVGR æ’ä»¶

åœ¨ 0.5.0 ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒSVGR æ’ä»¶çš„é»˜è®¤ç”¨æ³•ä¸ create-react-app ä¿æŒä¸€è‡´ï¼Œå…è®¸ä»¥æ··åˆå¯¼å…¥çš„å½¢å¼ä½¿ç”¨ SVGï¼š

```js
import logoUrl, { ReactComponent as Logo } from './logo.svg';

console.log(logoUrl); // -> string
console.log(Logo); // -> React component
```

ä½†è¿™ç§åšæ³•å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š

1. **åŒ…ä½“ç§¯å¢åŠ **ï¼šæ··åˆå¯¼å…¥ä¼šå¯¼è‡´å•ä¸ª SVG æ¨¡å—è¢«ç¼–è¯‘ä¸ºä¸¤ç§ä»£ç ï¼ˆå³ä½¿éƒ¨åˆ†å¯¼å‡ºæ²¡æœ‰è¢«ä½¿ç”¨ï¼‰ï¼Œè¿™ä¼šå¢åŠ äº§ç‰©çš„åŒ…ä½“ç§¯ã€‚
2. **ç¼–è¯‘é€Ÿåº¦ä¸‹é™**ï¼šæ··åˆå¯¼å…¥ä¼šäº§ç”Ÿé¢å¤–çš„ç¼–è¯‘å¼€é”€ã€‚å³ä½¿ä»£ç ä¸­æœªä½¿ç”¨åˆ° ReactComponent å¯¼å‡ºï¼ŒSVG æ–‡ä»¶ä»ç„¶ä¼šè¢« SVGR ç¼–è¯‘ã€‚è€Œ SVGR æ˜¯åŸºäº Babel å®ç°çš„ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬é‡æ„äº† `@rsbuild/plugin-svgr` æ’ä»¶ï¼Œæ”¯æŒé€šè¿‡ `?react` query æ¥å°† SVG è½¬æ¢ä¸º React ç»„ä»¶ï¼Œè¿™ç§ç”¨æ³•èƒ½å¤Ÿè§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œä¸”æ›´ç¬¦åˆå½“å‰ç¤¾åŒºçš„æœ€ä½³å®è·µã€‚

```jsx
import logoUrl from './logo.svg';
import Logo from './logo.svg?react';

console.log(logoUrl); // -> string
console.log(Logo); // -> React component
```

SVGR æ’ä»¶ç°åœ¨æ”¯æŒåœ¨å¤šç§ SVGR ç”¨æ³•ä¹‹é—´åˆ‡æ¢ï¼Œå¦‚æœé¡¹ç›®éœ€è¦ä½¿ç”¨ä¹‹å‰çš„æ··åˆå¯¼å…¥ç”¨æ³•ï¼Œå¯ä»¥æ‰‹åŠ¨å¼€å¯ [mixedImport](/plugins/list/plugin-svgr#mixedimport) é€‰é¡¹ï¼š

```js
pluginSvgr({
  mixedImport: true,
});
```

## ğŸ“ è‡ªå®šä¹‰å‹ç¼©é€‰é¡¹

`output.disableMinimize` é€‰é¡¹å·²ç»è¢«é‡å‘½åä¸º [output.minify](/config/output/minify)ï¼Œå¹¶å…è®¸è‡ªå®šä¹‰ JS å’Œ HTML çš„å‹ç¼©é€‰é¡¹ã€‚

```ts title="rsbuild.config.ts"
export default {
  output: {
    minify: {
      jsOptions: {
        minimizerOptions: {
          mangle: false,
        },
      },
    },
  },
};
```

ä½¿ç”¨ `output.disableMinimize` çš„é¡¹ç›®å¯ä»¥å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ï¼š

```ts
export default {
  output: {
    disableMinimize: true, // [!code --]
    minify: false, // [!code ++]
  },
};
```

> è¯¦è§ ["allow customize minify options"](https://github.com/web-infra-dev/rsbuild/issues/1681)ã€‚

---

æ›´å¤šå†…å®¹è¯·å‚è€ƒï¼š

- [Rsbuild 0.5.0 æ›´æ–°æ—¥å¿—](https://github.com/web-infra-dev/rsbuild/releases/tag/v0.5.0)
- [Rsbuild 0.5.0 ä¸å…¼å®¹æ›´æ–°](https://github.com/web-infra-dev/rsbuild/discussions/1732)
