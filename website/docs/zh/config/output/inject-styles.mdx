# output.injectStyles

- **类型：** `boolean`
- **默认值：** `false`

是否将 CSS 样式插入到 DOM 中。

默认情况下，Rsbuild 会把 CSS 提取为独立的 `.css` 文件，并输出到构建产物目录。设置该选项为 `true` 后，CSS 文件会被内联到 JS 文件中，并在运行时通过 `<style>` 标签插入到页面上。该功能基于 [style-loader](https://npmjs.com/package/style-loader) 实现。

## 示例

### 基础用法

为所有构建启用 CSS 注入：

```ts title="rsbuild.config.ts"
export default {
  output: {
    injectStyles: true,
  },
};
```

### 特定环境配置

仅在开发模式启用 CSS 注入以获得更快的 HMR，同时在生产模式保持 CSS 提取以获得最佳性能：

```ts title="rsbuild.config.ts"
export default {
  output: {
    injectStyles: process.env.NODE_ENV === 'development',
  },
};
```

### 多环境构建

为不同环境配置不同的 CSS 注入策略：

```ts title="rsbuild.config.ts"
export default {
  environments: {
    web: {
      output: {
        target: 'web',
        injectStyles: false, // Web 构建提取 CSS
      },
    },
    webComponent: {
      output: {
        target: 'web',
        injectStyles: true, // Web 组件注入 CSS 以避免外部依赖
      },
    },
  },
};
```

## 配置 style-loader

在开启 `output.injectStyles` 时，你可以通过 [tools.styleLoader](/config/tools/style-loader) 来修改 `style-loader` 的选项。

## 使用场景

建议仅在开发模式或需要将 CSS 与 JS 打包在一起的特定场景下启用 `injectStyles` 选项。

**开发模式：** 注入样式可以提供更快的热模块替换 (HMR) 更新，因为样式与 JavaScript 内联加载。

**Web 组件：** 构建可复用的 Web 组件时，注入样式确保组件是自包含的，无需外部 CSS 依赖。

**小部件/嵌入式脚本：** 对于需要嵌入到第三方网站的 JavaScript 小部件，注入样式消除了用户包含单独 CSS 文件的需要。

对于常规 Web 应用的生产构建，建议使用 Rsbuild 的默认行为，将 CSS 抽取为单独的 bundle，以便浏览器能够并行加载 CSS 和 JS 资源。

比如：

```ts title="rsbuild.config.ts"
export default {
  output: {
    injectStyles: process.env.NODE_ENV === 'development',
  },
};
```
