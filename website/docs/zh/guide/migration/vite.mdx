# Vite

Vite æ˜¯ä¸€ä¸ªä¼˜ç§€å’Œå¼ºå¤§çš„æ„å»ºå·¥å…·ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦å°†ä¸€ä¸ª Vite åº”ç”¨è¿ç§»åˆ° Rsbuildï¼Œé‚£ä¹ˆä½ å¯ä»¥å‚è€ƒè¿™ç¯‡æŒ‡å—è¿›è¡Œæ“ä½œã€‚

## å®‰è£…ä¾èµ–

é¦–å…ˆä½ éœ€è¦æŠŠ Vite ç›¸å…³çš„ npm ä¾èµ–æ›¿æ¢ä¸º Rsbuild çš„ä¾èµ–ã€‚

import { PackageManagerTabs } from '@theme';

- ç§»é™¤ Vite çš„ä¾èµ–ï¼š

<PackageManagerTabs command="remove vite" />

- å®‰è£… Rsbuild çš„ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsbuild/core -D" />

## æ›´æ–° npm scripts

ä¸‹ä¸€æ­¥ï¼Œä½ éœ€è¦æŠŠ package.json ä¸­çš„ npm scripts æ›´æ–°ä¸º Rsbuild çš„ CLI å‘½ä»¤ã€‚

```diff title="package.json"
{
  "scripts": {
-   "dev": "vite",
-   "build": "vite build",
-   "preview": "vite preview"
+   "dev": "rsbuild dev",
+   "build": "rsbuild build",
+   "preview": "rsbuild preview"
  }
}
```

## åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨ package.json çš„åŒçº§ç›®å½•ä¸‹åˆ›å»º Rsbuild çš„é…ç½®æ–‡ä»¶ `rsbuild.config.ts`ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';

export default defineConfig({
  plugins: [],
});
```

## æ„å»ºå…¥å£

Rsbuild ä¸ Vite é»˜è®¤çš„æ„å»ºå…¥å£ä¸åŒï¼ŒVite ä½¿ç”¨ `index.html` ä½œä¸ºé»˜è®¤å…¥å£ï¼Œè€Œ Rsbuild ä½¿ç”¨ `src/index.js`ã€‚

ä» Vite è¿ç§»åˆ° Rsbuild æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Rsbuild æä¾›çš„ [source.entry](/config/source/entry) æ¥è®¾ç½®æ„å»ºå…¥å£ï¼Œ[html.template](/config/html/template) æ¥è®¾ç½®æ¨¡æ¿ã€‚

ä»¥ä¸€ä¸ªæ–°å»ºçš„ Vite é¡¹ç›®ä¸ºä¾‹ï¼Œé¦–å…ˆåˆ é™¤ `index.html` ä¸­çš„ `<script>` æ ‡ç­¾ï¼š

```diff title="index.html"
- <script type="module" src="/src/main.ts"></script>
```

ç„¶åæ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ã€‚

```ts title="rsbuild.config.ts"
export default {
  html: {
    template: './index.html',
  },
  source: {
    entry: {
      index: './src/main.ts',
    },
  },
};
```

Rsbuild ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨æ³¨å…¥ `<script>` æ ‡ç­¾åˆ°ç”Ÿæˆçš„ HTML æ–‡ä»¶ä¸­ã€‚

## è¿ç§»æ’ä»¶

å¤§éƒ¨åˆ†å¸¸è§çš„ Vite æ’ä»¶å¯ä»¥è½»æ¾åœ°è¿ç§»åˆ° Rsbuild æ’ä»¶ï¼Œæ¯”å¦‚ï¼š

| Vite                                                                                       | Rsbuild                                                              |
| ------------------------------------------------------------------------------------------ | -------------------------------------------------------------------- |
| [@vitejs/plugin-react](https://www.npmjs.com/package/@vitejs/plugin-react)                 | [@rsbuild/plugin-react](/plugins/list/plugin-react)                  |
| [@vitejs/plugin-react-swc](https://www.npmjs.com/package/@vitejs/plugin-react-swc)         | [@rsbuild/plugin-react](/plugins/list/plugin-react)                  |
| [@vitejs/plugin-vue](https://www.npmjs.com/package/@vitejs/plugin-vue)                     | [@rsbuild/plugin-vue](/plugins/list/plugin-vue)                      |
| [@vitejs/plugin-vue2](https://www.npmjs.com/package/@vitejs/plugin-vue2)                   | [@rsbuild/plugin-vue2](/plugins/list/plugin-vue2)                    |
| [@vitejs/plugin-vue-jsx](https://www.npmjs.com/package/@vitejs/plugin-vue-jsx)             | [@rsbuild/plugin-vue-jsx](/plugins/list/plugin-vue-jsx)              |
| [@vitejs/plugin-vue2-jsx](https://www.npmjs.com/package/@vitejs/plugin-vue2-jsx)           | [@rsbuild/plugin-vue2-jsx](/plugins/list/plugin-vue2-jsx)            |
| [@vitejs/plugin-basic-ssl](https://www.npmjs.com/package/@vitejs/plugin-basic-ssl)         | [@rsbuild/plugin-basic-ssl](/plugins/list/plugin-basic-ssl)          |
| [@vitejs/plugin-legacy](https://www.npmjs.com/package/@vitejs/plugin-legacy)               | æ— é¡»ä½¿ç”¨ï¼Œè¯¦è§ [æµè§ˆå™¨å…¼å®¹æ€§](/guide/advanced/browser-compatibility) |
| [@sveltejs/vite-plugin-svelte](https://www.npmjs.com/package/@sveltejs/vite-plugin-svelte) | [@rsbuild/plugin-svelte](/plugins/list/plugin-svelte)                |
| [vite-plugin-svgr](https://www.npmjs.com/package/vite-plugin-svgr)                         | [@rsbuild/plugin-svgr](/plugins/list/plugin-svgr)                    |
| [vite-plugin-checker](https://www.npmjs.com/package/vite-plugin-checker)                   | [@rsbuild/plugin-type-check](/plugins/list/plugin-type-check)        |
| [vite-plugin-eslint](https://www.npmjs.com/package/vite-plugin-eslint)                     | [@rsbuild/plugin-eslint](/plugins/list/plugin-eslint)                |
| [vite-plugin-static-copy](https://www.npmjs.com/package/vite-plugin-static-copy)           | [output.copy](/config/output/copy)                                   |
| [vite-plugin-node-polyfills](https://www.npmjs.com/package/vite-plugin-node-polyfills)     | [@rsbuild/plugin-node-polyfill](/plugins/list/plugin-node-polyfill)  |
| [vite-plugin-solid](https://www.npmjs.com/package/vite-plugin-solid)                       | [@rsbuild/plugin-solid](/plugins/list/plugin-solid)                  |

ä½ å¯ä»¥å‚è€ƒ [æ’ä»¶åˆ—è¡¨](/plugins/list/index) æ¥äº†è§£æ›´å¤šå¯ç”¨çš„æ’ä»¶ã€‚

## Glob Import

Vite æä¾›äº† `import.meta.glob()` æ¥æ‰¹é‡å¯¼å…¥æ¨¡å—ã€‚

è¿ç§»åˆ° Rsbuild æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Rspack çš„ [import.meta.webpackContext](https://rspack.dev/zh/api/modules/module-variables#importmetawebpackcontext) å‡½æ•°ä»£æ›¿ï¼š

- Vite:

```js
const modules = import.meta.glob('./dir/*.js');

for (const path in modules) {
  modules[path]().then((mod) => {
    console.log(path, mod);
  });
}
```

- Rsbuild:

```js
const context = import.meta.webpackContext('./dir', {
  // æ˜¯å¦æœç´¢å­ç›®å½•
  recursive: false,
  regExp: /\.js$/,
});

for (const path of context.keys()) {
  const mod = context(path);
  console.log(path, mod);
}
```

## éªŒè¯ç»“æœ

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ å·²ç»å®Œæˆäº†ä» Vite åˆ° Rsbuild çš„åŸºæœ¬è¿ç§»ï¼Œæ­¤æ—¶å¯ä»¥æ‰§è¡Œ `npm run dev` å‘½ä»¤æ¥å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚

å¦‚æœåœ¨æ„å»ºè¿‡ç¨‹ä¸­å‘ç°é—®é¢˜ï¼Œè¯·æ ¹æ®é”™è¯¯æ—¥å¿—è¿›è¡Œè°ƒè¯•ï¼Œæˆ–è€…æŸ¥çœ‹ Vite é…ç½®ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸€äº›å¿…é¡»çš„é…ç½®æœªè¢«è¿ç§»åˆ° Rsbuildã€‚

## å†…å®¹è¡¥å……

å½“å‰æ–‡æ¡£åªæ¶µç›–äº†è¿ç§»è¿‡ç¨‹çš„éƒ¨åˆ†äº‹é¡¹ï¼Œå¦‚æœä½ å‘ç°æœ‰åˆé€‚çš„å†…å®¹å¯ä»¥è¡¥å……ï¼Œæ¬¢è¿é€šè¿‡ pull request æ¥å®Œå–„æ–‡æ¡£ ğŸ¤ã€‚

> Rsbuild çš„æ–‡æ¡£ä½äº [rsbuild/website](https://github.com/web-infra-dev/rsbuild/tree/main/website) ç›®å½•ã€‚
