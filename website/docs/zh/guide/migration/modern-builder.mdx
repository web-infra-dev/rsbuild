# Modern.js Builder

æœ¬ç« èŠ‚ä»‹ç»å¦‚ä½•å°†ä½¿ç”¨ Modern.js Builder (æˆ– EdenX Builder) çš„é¡¹ç›®è¿ç§»åˆ° Rsbuildã€‚

## ä¸»è¦åŒºåˆ«

Rsbuild æ˜¯ Modern.js Builder çš„æ–°ç‰ˆæœ¬ï¼Œä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š

- Rsbuild çš„æ€§èƒ½æ›´å‡ºè‰²ï¼Œåœ¨åŒæ—¶ä½¿ç”¨ Rspack çš„æƒ…å†µä¸‹ï¼Œ**Rsbuild çš„å¯åŠ¨é€Ÿåº¦å’Œæ„å»ºé€Ÿåº¦æ˜¯ Builder çš„ 1.5 ~ 2 å€**ã€‚
- Rsbuild ä»…æ”¯æŒ Rspack ä½œä¸ºæ‰“åŒ…å·¥å…·ï¼Œä¸å†æ”¯æŒ webpackã€‚
- Rsbuild çš„ CLI å·¥å…·å’Œ dev server æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒæ›´å¤šåŠŸèƒ½ã€‚

## å®‰è£…ä¾èµ–

é¦–å…ˆä½ éœ€è¦æŠŠ Builder ç›¸å…³çš„ npm ä¾èµ–æ›¿æ¢ä¸º Rsbuild çš„ä¾èµ–ã€‚

import { PackageManagerTabs } from '@theme';

- ç§»é™¤ Builder çš„ä¾èµ–ï¼š

<PackageManagerTabs command="remove @modern-js/builder-cli @modern-js/builder-webpack-provider @modern-js/builder-rspack-provider" />

- å®‰è£… Rsbuild çš„ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsbuild/core -D" />

## æ›´æ–° npm scripts

ä¸‹ä¸€æ­¥ï¼Œä½ éœ€è¦æŠŠ package.json ä¸­çš„ npm scripts æ›´æ–°ä¸º Rsbuild çš„ CLI å‘½ä»¤ã€‚

```json title="package.json"
{
  "scripts": {
    "dev": "builder dev", // [!code --]
    "build": "builder build", // [!code --]
    "serve": "builder serve", // [!code --]
    "dev": "rsbuild dev", // [!code ++]
    "build": "rsbuild build", // [!code ++]
    "preview": "rsbuild preview" // [!code ++]
  }
}
```

## ä¿®æ”¹é…ç½®æ–‡ä»¶

- å°† `builder.config.ts` é‡å‘½åä¸º `rsbuild.config.ts`ã€‚
- ä» `@modern-js/builder-cli` ä¸­å¯¼å…¥ `defineConfig` æ–¹æ³•ï¼Œæ”¹ä¸ºä» `@rsbuild/core` ä¸­å¯¼å…¥ã€‚
- å°† `builderPlugins` å­—æ®µæ”¹ä¸º `plugins`ã€‚

```ts title="rsbuild.config.ts"
import { defineConfig } from '@modern-js/builder-cli'; // [!code --]
import { defineConfig } from '@rsbuild/core'; // [!code ++]

export default defineConfig({
  builderPlugins: [], // [!code --]
  plugins: [], // [!code ++]
});
```

## æ›¿æ¢æ’ä»¶

Rsbuild å’Œ Builder çš„æ’ä»¶ç³»ç»Ÿä¸å…¼å®¹ï¼Œå› æ­¤éœ€è¦å°† Builder çš„æ’ä»¶æ›¿æ¢ä¸º Rsbuild çš„æ’ä»¶ã€‚

ä¸‹é¢æ˜¯ Builder æ’ä»¶å’Œ Rsbuild æ’ä»¶çš„å¯¹åº”å…³ç³»ï¼š

| Builder                                  | Rsbuild                                                                                           |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------- |
| @modern-js/builder-plugin-vue            | [@rsbuild/plugin-vue](/plugins/list/plugin-vue)                                                   |
| @modern-js/builder-plugin-vue2           | [@rsbuild/plugin-vue2](https://github.com/rspack-contrib/rsbuild-plugin-vue2)                     |
| @modern-js/builder-plugin-stylus         | [@rsbuild/plugin-stylus](/plugins/list/plugin-stylus)                                             |
| @modern-js/builder-plugin-node-polyfill  | [@rsbuild/plugin-node-polyfill](https://github.com/rspack-contrib/rsbuild-plugin-node-polyfill)   |
| @modern-js/builder-plugin-image-compress | [@rsbuild/plugin-image-compress](https://github.com/rspack-contrib/rsbuild-plugin-image-compress) |
| @modern-js/builder-plugin-swc            | é»˜è®¤ç”Ÿæ•ˆï¼Œæ— é¡»ä½¿ç”¨                                                                                |
| @modern-js/builder-plugin-esbuild        | ä¸å†æ”¯æŒ                                                                                          |

ä»¥ `@modern-js/builder-plugin-vue` ä¸ºä¾‹ï¼Œä½ éœ€è¦å…ˆå®‰è£… `@rsbuild/plugin-vue`ï¼Œç„¶ååœ¨ `rsbuild.config.ts` ä¸­å¼•å…¥æ’ä»¶ï¼Œå¹¶æ·»åŠ åˆ° `plugins` å­—æ®µä¸­ã€‚

```ts title="rsbuild.config.ts"
import { builderPluginVue } from '@modern-js/builder-plugin-vue'; // [!code --]
import { pluginVue } from '@rsbuild/plugin-vue'; // [!code ++]

export default defineConfig({
  builderPlugins: [builderPluginVue()], // [!code --]
  plugins: [pluginVue()], // [!code ++]
});
```

## æ·»åŠ  React ç›¸å…³æ’ä»¶

Rsbuild ä¸ä¸ä»»ä½•å‰ç«¯ UI æ¡†æ¶è€¦åˆã€‚å› æ­¤ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ª React é¡¹ç›®ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ  [React æ’ä»¶](/plugins/list/plugin-react)ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginReact } from '@rsbuild/plugin-react';

export default defineConfig({
  plugins: [pluginReact()],
});
```

å¦‚æœä½ å½“å‰é¡¹ç›®ä¸­æœ‰ä½¿ç”¨ SVGRï¼Œè¿˜éœ€è¦æ³¨å†Œ Rsbuild çš„ [SVGR æ’ä»¶](/plugins/list/plugin-svgr)ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginSvgr } from '@rsbuild/plugin-svgr';

export default defineConfig({
  plugins: [pluginSvgr()],
});
```

å¦‚æœä½ æ˜¯å…¶ä»–æ¡†æ¶çš„ä½¿ç”¨è€…ï¼Œå¯å‚è€ƒ [æ’ä»¶åˆ—è¡¨](/plugins/list/index) é€‰æ‹©å¯¹åº”çš„æ¡†æ¶æ’ä»¶ã€‚

## é…ç½®è¿ç§»

Rsbuild å’Œ Builder çš„ç»å¤§å¤šæ•°é…ç½®é¡¹æ˜¯ä¸€è‡´çš„ï¼Œä»…æœ‰å°‘è®¸é…ç½®é¡¹è¿›è¡Œäº†è°ƒæ•´ã€‚

ä½ å¯ä»¥é€šè¿‡ [Rsbuild é…ç½®é¡¹](/config/index) æ¥æŸ¥çœ‹ Rsbuild çš„é…ç½®é¡¹ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›¸æ¯” Builderï¼Œ**Rsbuild ä¸­ä¸€äº›é»˜è®¤å€¼å’Œè¡Œä¸ºå­˜åœ¨å·®å¼‚**ï¼š

- æµè§ˆå™¨èŒƒå›´ï¼šé»˜è®¤æœ€ä½å…¼å®¹åˆ°æ”¯æŒ [åŸç”Ÿ ES Modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules) çš„æµè§ˆå™¨ï¼Œå¯å‚è€ƒ [Browserslist é»˜è®¤å€¼](/guide/advanced/browserslist#browserslist-é»˜è®¤å€¼)ã€‚
- HTML æ–‡ä»¶è¾“å‡ºä½ç½®ï¼šé»˜è®¤è¾“å‡ºåˆ° dist ç›®å½•çš„æ ¹éƒ¨ï¼Œå¯å‚è€ƒ [é»˜è®¤äº§ç‰©ç›®å½•](/guide/basic/output-files#é»˜è®¤äº§ç‰©ç›®å½•)ã€‚
- Polyfill æ³¨å…¥æ–¹å¼ï¼šé»˜è®¤æŒ‰éœ€æ³¨å…¥ï¼Œå¯å‚è€ƒ [output.polyfill](/config/output/polyfill)ã€‚
- TypeScript ç±»å‹æ£€æŸ¥ï¼šé»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦æ‰‹åŠ¨æ³¨å†Œ [@rsbuild/plugin-type-check](https://github.com/rspack-contrib/rsbuild-plugin-type-check)ã€‚
- ä¿®æ”¹ DevServer é…ç½®ï¼šé€šè¿‡ `dev` å’Œ `server` é…ç½®é¡¹ä¿®æ”¹ã€‚

## éªŒè¯ç»“æœ

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ å·²ç»å®Œæˆäº†ä» Modern.js Builder åˆ° Rsbuild çš„åŸºæœ¬è¿ç§»ï¼Œæ­¤æ—¶å¯ä»¥æ‰§è¡Œ `npm run dev` å‘½ä»¤æ¥å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚

å¦‚æœåœ¨æ„å»ºè¿‡ç¨‹ä¸­å‘ç°é—®é¢˜ï¼Œè¯·æ ¹æ®é”™è¯¯æ—¥å¿—è¿›è¡Œè°ƒè¯•ã€‚

## å†…å®¹è¡¥å……

å½“å‰æ–‡æ¡£åªæ¶µç›–äº†è¿ç§»è¿‡ç¨‹çš„éƒ¨åˆ†äº‹é¡¹ï¼Œå¦‚æœä½ å‘ç°æœ‰åˆé€‚çš„å†…å®¹å¯ä»¥è¡¥å……ï¼Œæ¬¢è¿é€šè¿‡ pull request æ¥å®Œå–„æ–‡æ¡£ ğŸ¤ã€‚

> Rsbuild çš„æ–‡æ¡£ä½äº [rsbuild/website](https://github.com/web-infra-dev/rsbuild/tree/main/website) ç›®å½•ã€‚
