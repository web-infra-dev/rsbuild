# Vue CLI

æœ¬ç« èŠ‚ä»‹ç»å¦‚ä½•å°† [Vue CLI](https://github.com/vuejs/vue-cli) é¡¹ç›®è¿ç§»åˆ° Rsbuildã€‚

## å®‰è£…ä¾èµ–

é¦–å…ˆä½ éœ€è¦æŠŠ Vue CLI çš„ npm ä¾èµ–æ›¿æ¢ä¸º Rsbuild çš„ä¾èµ–ã€‚

import { PackageManagerTabs } from '@theme';

- ç§»é™¤ Vue CLI çš„ä¾èµ–ï¼š

<PackageManagerTabs command="remove @vue/cli-service @vue/cli-plugin-babel @vue/cli-plugin-eslint core-js" />

- å®‰è£… Rsbuild çš„ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsbuild/core @rsbuild/plugin-vue -D" />

:::tip
å¦‚æœä½ çš„é¡¹ç›®æ˜¯åŸºäº Vue 2 çš„ï¼Œè¯·å°† `@rsbuild/plugin-vue` æ›¿æ¢ä¸º `@rsbuild/plugin-vue2`ã€‚
:::

## æ›´æ–° npm scripts

ä¸‹ä¸€æ­¥ï¼Œä½ éœ€è¦æŠŠ package.json ä¸­çš„ npm scripts æ›´æ–°ä¸º Rsbuild çš„ CLI å‘½ä»¤ã€‚

```json title="package.json"
{
  "scripts": {
    "serve": "vue-cli-service serve", // [!code --]
    "build": "vue-cli-service build", // [!code --]
    "serve": "rsbuild dev", // [!code ++]
    "build": "rsbuild build", // [!code ++]
    "preview": "rsbuild preview" // [!code ++]
  }
}
```

:::tip
Rsbuild æœªé›†æˆ ESLintï¼Œå› æ­¤æ²¡æœ‰æä¾›ç”¨äºæ›¿æ¢ `vue-cli-service lint` çš„å‘½ä»¤ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ ESLint çš„ [CLI å‘½ä»¤](https://eslint.org/docs/latest/use/command-line-interface) ä½œä¸ºæ›¿ä»£ã€‚
:::

## åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨ package.json çš„åŒçº§ç›®å½•ä¸‹åˆ›å»º Rsbuild çš„é…ç½®æ–‡ä»¶ `rsbuild.config.ts`ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';

export default defineConfig({
  plugins: [pluginVue()],
  source: {
    // æŒ‡å®šå…¥å£æ–‡ä»¶
    entry: {
      index: './src/main.js',
    },
  },
});
```

:::tip
å¦‚æœä½ çš„é¡¹ç›®æ˜¯åŸºäº Vue 2 çš„ï¼Œè¯·ä½¿ç”¨ `import { pluginVue2 } from '@rsbuild/plugin-vue2';`ã€‚
:::

## HTML æ¨¡æ¿

Vue CLI é»˜è®¤ä½¿ç”¨ `public/index.html` æ–‡ä»¶ä½œä¸º HTML æ¨¡æ¿ã€‚åœ¨ Rsbuild ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ [html.template](/config/html/template) æ¥æŒ‡å®š HTML æ¨¡æ¿ï¼š

```ts title="rsbuild.config.ts"
export default defineConfig({
  html: {
    template: './public/index.html',
  },
});
```

åœ¨ HTML æ¨¡æ¿ä¸­ï¼Œå¦‚æœä½¿ç”¨äº† Vue CLI çš„ `BASE_URL` å˜é‡ï¼Œè¯·æ›¿æ¢ä¸º Rsbuild çš„ [assetPrefix å˜é‡](/config/html/template-parameters)ï¼Œå¹¶ä½¿ç”¨æ–œæ è¿›è¡Œè¿æ¥ï¼š

```html
<link rel="icon" href="<%= BASE_URL %>favicon.ico" />
<!-- [!code --] -->
<link rel="icon" href="<%= assetPrefix %>/favicon.ico" />
<!-- [!code ++] -->
```

è¿™æ ·å°±å®Œæˆäº†ä» Vue CLI åˆ° Rsbuild çš„åŸºæœ¬è¿ç§»ï¼Œæ­¤æ—¶ä½ å¯ä»¥æ‰§è¡Œ `npm run serve` å‘½ä»¤æ¥å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚

## é…ç½®è¿ç§»

ä»¥ä¸‹æ˜¯ Vue CLI é…ç½®å¯¹åº”çš„ Rsbuild é…ç½®ï¼š

| Vue CLI                                                                                                                                 | Rsbuild                                                                                                                                                |
| --------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [publicPath](https://cli.vuejs.org/config/#publicpath)                                                                                  | [dev.assetPrefix](/config/dev/asset-prefix) / [output.assetPrefix](/config/output/asset-prefix)                                                        |
| [outputDir](https://cli.vuejs.org/config/#outputdir) / [assetsDir](https://cli.vuejs.org/config/#assetsdir)                             | [output.distPath](/config/output/dist-path)                                                                                                            |
| [filenameHashing](https://cli.vuejs.org/config/#filenamehashing)                                                                        | [output.filenameHash](/config/output/filename-hash)                                                                                                    |
| [pages](https://cli.vuejs.org/config/#pages)                                                                                            | [source.entry](/config/source/entry) / [html.template](/config/html/template) / [html.title](/config/html/title)                                       |
| [transpileDependencies](https://cli.vuejs.org/config/#transpiledependencies)                                                            | [source.include](/config/source/include)                                                                                                               |
| [productionSourceMap](https://cli.vuejs.org/config/#productionsourcemap) / [css.sourceMap](https://cli.vuejs.org/config/#css-sourcemap) | [output.sourceMap](/config/output/source-map)                                                                                                          |
| [crossorigin](https://cli.vuejs.org/config/#crossorigin)                                                                                | [html.crossorigin](/config/html/crossorigin)                                                                                                           |
| [configureWebpack](https://cli.vuejs.org/config/#configurewebpack)                                                                      | [tools.rspack](/config/tools/rspack)                                                                                                                   |
| [chainWebpack](https://cli.vuejs.org/config/#chainwebpack)                                                                              | [tools.bundlerChain](/config/tools/bundler-chain)                                                                                                      |
| [css.extract](https://cli.vuejs.org/config/#css-extract)                                                                                | [output.injectStyles](/config/output/inject-styles)                                                                                                    |
| [css.loaderOptions](https://cli.vuejs.org/config/#css-loaderoptions)                                                                    | [tools.cssLoader](/config/tools/css-loader) / [less](/plugins/list/plugin-less) / [sass](/plugins/list/plugin-sass) / [postcss](/config/tools/postcss) |
| [devServer.proxy](https://cli.vuejs.org/config/#devserver-proxy)                                                                        | [server.proxy](/config/server/proxy)                                                                                                                   |

è¯´æ˜ï¼š

- åœ¨è¿ç§» configureWebpack æ—¶ï¼Œæ³¨æ„å¤§éƒ¨åˆ† webpack å’Œ Rspack é…ç½®æ˜¯ç›¸åŒçš„ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚æˆ– Rspack æœªå®ç°çš„åŠŸèƒ½ã€‚
- ä¸Šè¿°è¡¨æ ¼å°šæœªè¦†ç›–åˆ° Vue CLI çš„æ‰€æœ‰é…ç½®ï¼Œæ¬¢è¿è¡¥å……ã€‚

## ç¯å¢ƒå˜é‡

Vue CLI é»˜è®¤ä¼šå°† `VUE_APP_` å¼€å¤´çš„ç¯å¢ƒå˜é‡æ³¨å…¥åˆ° client ä»£ç ä¸­ï¼Œè€Œ Rsbuild é»˜è®¤ä¼šæ³¨å…¥ `PUBLIC_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒ [public å˜é‡](/guide/advanced/env-vars#public-å˜é‡)ï¼‰ã€‚

ä¸ºäº†å…¼å®¹ Vue CLI çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ Rsbuild æä¾›çš„ [loadEnv](/api/javascript-api/core#loadenv) æ–¹æ³•æ¥è¯»å– `VUE_APP_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶é€šè¿‡ [source.define](/config/source/define) é…ç½®é¡¹æ³¨å…¥åˆ° client ä»£ç ä¸­ã€‚

```ts title="rsbuild.config.ts"
import { defineConfig, loadEnv } from '@rsbuild/core';

const { publicVars } = loadEnv({ prefixes: ['VUE_APP_'] });

export default defineConfig({
  source: {
    define: publicVars,
  },
});
```

## å†…å®¹è¡¥å……

å½“å‰æ–‡æ¡£åªæ¶µç›–äº†è¿ç§»è¿‡ç¨‹çš„éƒ¨åˆ†äº‹é¡¹ï¼Œå¦‚æœä½ å‘ç°æœ‰åˆé€‚çš„å†…å®¹å¯ä»¥è¡¥å……ï¼Œæ¬¢è¿é€šè¿‡ pull request æ¥å®Œå–„æ–‡æ¡£ ğŸ¤ã€‚

> Rsbuild çš„æ–‡æ¡£ä½äº [rsbuild/website](https://github.com/web-infra-dev/rsbuild/tree/main/website) ç›®å½•ã€‚
