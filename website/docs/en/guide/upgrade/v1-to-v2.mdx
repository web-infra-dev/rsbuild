# Upgrading from v1 to v2

This document lists all breaking changes from Rsbuild 1.x to 2.0. Use it as a migration reference.

> This guide is a work in progress. Content will be added incrementally as Rsbuild 2.0 beta evolves.

## Node.js support

Node.js 18 reached its [end of life](https://nodejs.org/en/about/eol) on April, 2025, so it is no longer supported by Rsbuild 2.0.

Rsbuild 2.0 requires Node.js 20.19+ or 22.12+.

## Pure ESM package

[@rsbuild/core](https://www.npmjs.com/package/@rsbuild/core) is now published as a pure ESM package, and its CommonJS build output has been removed. This change only affects how Rsbuild itself is published, reducing the installation size by about 500 KB.

In Node.js 20 and later, the runtime natively supports loading ESM modules via [require(esm)](https://nodejs.org/api/modules.html#loading-ecmascript-modules-using-require). As a result, for most projects that use Rsbuild through its JavaScript API, this change should have no practical impact and does not require any code modifications.

> This does not affect Rsbuild's ability to build CommonJS output. All related build behavior and configuration options remain unchanged.

## Configuration

### Default server host

The default value of [server.host](/config/server/host) has changed from `'0.0.0.0'` to `'localhost'`.

This change prevents the dev server from being exposed to the local network by default, ensuring "secure by default" behavior.

If you need to access the server from other devices on the same network (e.g., for mobile testing), you can manually set the host to `'0.0.0.0'`:

```ts title="rsbuild.config.ts"
export default {
  server: {
    host: '0.0.0.0',
  },
};
```

Alternatively, you can use the `--host` CLI flag to enable network access on demand:

```bash
rsbuild dev --host
```

### Remove `source.alias`

The deprecated `source.alias` option has been removed. Use [resolve.alias](/config/resolve/alias) instead.

```diff title="rsbuild.config.ts"
export default {
- source: {
+ resolve: {
    alias: {
      '@': './src',
    },
  },
};
```

### Remove `source.aliasStrategy`

The deprecated `source.aliasStrategy` option has been removed. Use [resolve.aliasStrategy](/config/resolve/alias-strategy) instead.

```diff title="rsbuild.config.ts"
export default {
- source: {
+ resolve: {
    aliasStrategy: 'prefer-alias',
  },
};
```

### Remove `performance.bundleAnalyze`

The deprecated `performance.bundleAnalyze` option has been removed.

In earlier versions, Rsbuild bundled `webpack-bundle-analyzer` by default. Rsdoctor now provides built-in bundle size analysis, so this functionality no longer needs to live inside `@rsbuild/core`. Removing it also helps reduce the installation size.

Use [Rsdoctor](/guide/debug/rsdoctor) to analyze bundle size, or register [webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer) yourself via [tools.rspack](/config/tools/rspack):

```ts title="rsbuild.config.ts"
import { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer';

export default {
  tools: {
    rspack: {
      plugins: [
        new BundleAnalyzerPlugin({
          analyzerMode: 'static',
        }),
      ],
    },
  },
};
```

### Remove `performance.profile`

The `performance.profile` option has been removed. If you relied on it to emit a stats JSON file, use [stats.toJson()](/api/javascript-api/instance#stats-object) in a custom plugin instead:

```ts title="rsbuild.config.ts"
import { writeFileSync } from 'node:fs';
import { join } from 'node:path';

const statsJsonPlugin = {
  name: 'stats-json-plugin',
  setup(api) {
    api.onAfterBuild(({ stats }) => {
      writeFileSync(
        join(api.context.distPath, 'stats.json'),
        JSON.stringify(stats?.toJson({}), null, 2),
      );
    });
  },
};

export default {
  plugins: [statsJsonPlugin],
};
```

### Remove HTML template parameters

The deprecated template parameters have been removed from `html.templateParameters`

- `webpackConfig`: use `rspackConfig` instead.
- `htmlWebpackPlugin`: use `htmlPlugin` instead.

### Node minification

For Node targets, production builds no longer enable minification by default.

Server bundles now prioritize debuggability, clear stack traces, and stable runtime behavior over bundle size. If you still want minified output, opt in with [output.minify](/config/output/minify):

```ts title="rsbuild.config.ts"
export default {
  output: {
    target: 'node',
    minify: true,
  },
};
```

## JavaScript API

- Removed the deprecated `compiler` parameter from `rsbuild.build()`.
- Removed the deprecated `compiler` parameter from `rsbuild.startDevServer()`.

## Dropping webpack support

Rsbuild 2.0 no longer supports using webpack as the bundler. In Rsbuild 1.x, this capability was mainly used to validate compatibility between Rspack and webpack. As Rspack has gradually matured and stabilized, this purpose is no longer necessary, so the related support has been removed.

The specific changes are as follows:

- Removed the `@rsbuild/webpack` package.
- Removed the `@rsbuild/plugin-webpack-swc` package.
- Removed the `provider` configuration option.
- Removed the `tools.webpack` and `tools.webpackChain` configuration options.
- Removed the `api.modifyWebpackChain` and `api.modifyWebpackConfig` plugin hooks.
- Removed the `webpack` type from the `api.context.bundlerType`.
- Removed webpack-related types.
