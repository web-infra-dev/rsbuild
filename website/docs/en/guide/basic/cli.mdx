# CLI

Rsbuild comes with a lightweight CLI that includes commands such as [rsbuild dev](#rsbuild-dev) and [rsbuild build](#rsbuild-build).

## All commands

To view all available CLI commands, run the following command in the project directory:

```bash
npx rsbuild -h
```

The output is shown below:

```
Usage:
  $ rsbuild <command> [options]

Commands:
  dev      Start the dev server
  build    Build the app for production
  preview  Preview the production build locally
  inspect  Inspect the Rspack and Rsbuild configs
```

## Common flags

Rsbuild CLI provides several common flags that can be used with all commands:

| Flag                       | Description                                                                                                                       |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| `--base <base>`            | Set the base path of the server, see [server.base](/config/server/base)                                                           |
| `-c, --config <config>`    | Set the configuration file (relative or absolute path), see [Set config file](/guide/configuration/rsbuild#specify-config-file)   |
| `--config-loader <loader>` | Set the config file loader (`jiti` \| `native`), see [Set config loader](/guide/configuration/rsbuild#specify-config-loader)      |
| `--env-mode <mode>`        | Set the env mode to load the `.env.[mode]` file, see [Env mode](/guide/advanced/env-vars#env-mode)                                |
| `--env-dir <dir>`          | Set the directory for loading `.env` files, see [Env directory](/guide/advanced/env-vars#env-directory)                           |
| `--environment <name>`     | Set the environment name(s) to build, see [Build specified environment](/guide/advanced/environments#build-specified-environment) |
| `-h, --help`               | Display help for command                                                                                                          |
| `--log-level <level>`      | Set the log level (`info` \| `warn` \| `error` \| `silent`), see [logLevel](/config/log-level)                                    |
| `-m, --mode <mode>`        | Set the build mode (`development` \| `production` \| `none`), see [mode](/config/mode)                                            |
| `--no-env`                 | Disable loading of `.env` files                                                                                                   |
| `-r, --root <root>`        | Set the project root directory (absolute path or relative to [cwd](https://nodejs.org/api/process.html#processcwd))               |

## rsbuild dev

The `rsbuild dev` command is used to start a local dev server and compile the source code for development.

```bash
Usage: rsbuild dev [options]

Options:
  -o, --open [url]      Open the page in browser on startup
  --port <port>         Set the port number for the server
  --host <host>         Set the host that the server listens to
```

You can also start the dev server by running `rsbuild` directly, which is equivalent to running `rsbuild dev`.

```bash
npx rsbuild
```

### Opening page

The `--open` option allows you to automatically open a page when starting the dev server, which is equivalent to setting [server.open](/config/server/open) to `true`.

```bash
rsbuild dev --open
```

The `--open` option also supports specifying the URL to be opened, for example:

```bash
rsbuild dev --open http://localhost:3000/foo
```

The `--open` option can also be abbreviated to `-o`:

```bash
rsbuild dev -o
```

:::tip
When using [server.open](/config/server/open) and `--open` at the same time, `--open` takes precedence.
:::

## rsbuild build

The `rsbuild build` command will build the outputs for production in the `dist/` directory by default.

```bash
Usage: rsbuild build [options]

Options:
  -w, --watch           Enable watch mode to automatically rebuild on file changes
```

## rsbuild preview

The `rsbuild preview` command is used to preview the production build outputs locally. Note that you need to execute the `rsbuild build` command beforehand to generate the build outputs.

```bash
Usage: rsbuild preview [options]

Options:
  -o, --open [url]      Open the page in browser on startup
  --port <port>         Set a port number for Rsbuild server to listen
  --host <host>         Set the host that the Rsbuild server listens to
```

:::tip
The preview command is only used for local preview. Do not use it for production servers, as it is not designed for that.
:::

## rsbuild inspect

The `rsbuild inspect` command is used to view the Rsbuild config and Rspack config of the project.

```bash
Usage: rsbuild inspect [options]

Options:
  --output <output>     Set the output path for inspection results (default: ".rsbuild")
  --verbose             Show complete function definitions in output
```

When you run the command `npx rsbuild inspect` in the project root directory, the following files will be generated in the `dist/.rsbuild` directory of the project:

- `rsbuild.config.mjs`: Represents the Rsbuild configuration used during the build.
- `rspack.config.web.mjs`: Represents the Rspack configuration used during the build.

```bash
➜ npx rsbuild inspect

config inspection completed, generated files:

  - Rsbuild config: /project/dist/.rsbuild/rsbuild.config.mjs
  - Rspack config (web): /project/dist/.rsbuild/rspack.config.web.mjs
```

### Setting mode

By default, the inspect command outputs the configuration for the development mode. You can add the `--mode production` option to output the configuration for the production mode:

```bash
rsbuild inspect --mode production
```

### Verbose content

By default, the inspect command omits the content of functions in the configuration object. You can add the `--verbose` option to output the complete content of functions:

```bash
rsbuild inspect --verbose
```

### Multiple targets

If the current project has multiple build targets, such as building browser artifact and Node.js artifact simultaneously, multiple Rspack configuration files will be generated in the `dist/.rsbuild` directory.

```bash
➜ npx rsbuild inspect

config inspection completed, generated files:

  - Rsbuild config (web): /project/dist/.rsbuild/rsbuild.config.web.mjs
  - Rsbuild config (node): /project/dist/.rsbuild/rsbuild.config.node.mjs
  - Rspack config (web): /project/dist/.rsbuild/rspack.config.web.mjs
  - Rspack config (node): /project/dist/.rsbuild/rspack.config.node.mjs
```
