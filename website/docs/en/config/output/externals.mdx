# output.externals

- **Type:**

```ts
type Externals =
  | string
  | object
  | function
  | RegExp
  | Array<string | object | function | RegExp>;
```

- **Default:** `undefined`

At build time, prevent some `import` dependencies from being packed into bundles in your code, and instead fetch them externally at runtime.

> For more information, please see: [Rspack Externals](https://rspack.rs/config/externals).

## Examples

### Basic usage

Exclude the `react-dom` dependency from the output bundle. To get this module at runtime, the value of `react-dom` will globally retrieve the `ReactDOM` variable.

```js
export default {
  output: {
    externals: {
      'react-dom': 'ReactDOM',
    },
  },
};
```

### Multiple externals

You can exclude multiple dependencies by providing an object with multiple entries:

```js
export default {
  output: {
    externals: {
      react: 'React',
      'react-dom': 'ReactDOM',
      lodash: '_',
      moment: 'moment',
    },
  },
};
```

### Array format

Use an array to define multiple external configurations:

```js
export default {
  output: {
    externals: [
      {
        react: 'React',
        'react-dom': 'ReactDOM',
      },
      'lodash',
    ],
  },
};
```

### Using with CDN

A common use case is to load popular libraries from CDN and exclude them from your bundle to reduce bundle size:

```js
export default {
  output: {
    externals: {
      react: 'React',
      'react-dom': 'ReactDOM',
      antd: 'antd',
    },
  },
  html: {
    tags: [
      {
        tag: 'script',
        attrs: {
          src: 'https://unpkg.com/react@18/umd/react.production.min.js',
        },
      },
      {
        tag: 'script',
        attrs: {
          src: 'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js',
        },
      },
      {
        tag: 'script',
        attrs: {
          src: 'https://unpkg.com/antd@5/dist/antd.min.js',
        },
      },
    ],
  },
};
```

### Function-based externals

Use a function to dynamically determine whether a module should be external:

```js
export default {
  output: {
    externals: (context, request, callback) => {
      // Externalize all requests starting with 'jquery'
      if (/^jquery/.test(request)) {
        return callback(null, 'jQuery');
      }
      // Continue with normal bundling
      callback();
    },
  },
};
```

### RegExp patterns

Use regular expressions to match multiple modules with a pattern:

```js
export default {
  output: {
    externals: [
      // Externalize all @babel packages
      /^@babel\/.+$/,
      // Externalize all lodash sub-modules
      /^lodash\/.+$/,
    ],
  },
};
```

### Complex configuration

Combine different external types for more complex scenarios:

```js
export default {
  output: {
    externals: [
      // String format - assumes global variable name same as module name
      'jquery',
      // Object format - explicit global variable mapping
      {
        react: 'React',
        'react-dom': 'ReactDOM',
      },
      // Function format - dynamic externalization
      (context, request, callback) => {
        if (request.startsWith('@my-company/')) {
          return callback(null, `MyCompany['${request.slice(12)}']`);
        }
        callback();
      },
      // RegExp format - pattern matching
      /^chartjs-.+$/,
    ],
  },
};
```

:::tip
If [output.target](/config/output/target) is `web-worker`, externals will not take effect. This is because the Web Worker environment cannot access global variables.
:::
