---
published_at: 2024-05-23 18:00:00
---

# Announcing Rsbuild v0.7

> May 23, 2024

![](https://assets.rspack.dev/rsbuild/rsbuild-banner-with-storybook.png)

Rsbuild v0.7 has been released with Rspack v0.7. Notable changes include:

- [Support for Storybook](#support-for-storybook)
- [Better CSS supports](#better-css-supports)
- [Typed CSS Modules](#typed-css-modules)
- More...

## Support for Storybook

TODO

## Better CSS supports

Rsbuild now uses [CssExtractRspackPlugin](https://www.rspack.dev/plugins/rspack/css-extract-rspack-plugin) to extract CSS into separate files, rather than using the `experimental.css` config to do so.

This allows Rsbuild to support more CSS features, including:

- Support for using `<style module>` in the Vue SFC:

```html title="index.vue"
<template>
  <p :class="$style.red">Red</p>
</template>

<style module>
  .red {
    color: red;
  }
</style>
```

- Support for complex CSS Modules `:global()` syntax

```css title="style.module.css"
:local(.parent):global(.child) > ul {
  color: red;
}
```

- Support for more CSS Modules options, such as [cssModules.exportGlobals](/config/output/css-modules#cssmodulesexportglobals)
- Now you can use [tools.cssExtract](/config/tools/css-extract) to configure CssExtractRspackPlugin.

## Typed CSS Modules

Rsbuild v0.7 added a new [Typed CSS Modules plugin](/plugins/list/plugin-typed-css-modules), which is used to generate type declaration files for CSS Modules in the project.

When you use CSS Modules in a TypeScript project, the default type definition is as follows. It can only provide basic type support, and cannot accurately prompt which class names are exported by CSS Modules.

```ts title="src/env.d.ts"
declare module '*.module.css' {
  const classes: { readonly [key: string]: string };
  export default classes;
}
```

After using the Typed CSS Modules plugin, Rsbuild will generate type declaration files for all CSS Modules in the project, providing accurate type hints.

For example, create two files named `src/index.ts` and `src/index.module.css`:

```tsx title="src/index.ts"
import styles from './index.module.css';

console.log(styles.pageHeader);
```

```css title="index.module.css"
.page-header {
  color: black;
}
```

After building, Rsbuild will generate a `src/index.module.css.d.ts` type declaration file:

```ts title="src/index.module.css.d.ts"
interface CssExports {
  'page-header': string;
  pageHeader: string;
}
export const cssExports: CssExports;
export default cssExports;
```

Now when you open the `src/index.ts` file, you can see that the `styles` object already has an accurate type.

## ESM/CJS Exports

Now, all packages of Rsbuild provide exports in both ES modules and CommonJS formats, and `"type"="module"` has been declared in the package.json.

![](https://assets.rspack.dev/rsbuild/assets/rsbuild-dual-package-example.png)

This allows you to use `import` or `require` to use the JavaScript API of Rsbuild:

```js
// ES module
import { createRsbuild } from '@rsbuild/core';

// CommonJS
const { createRsbuild } = require('@rsbuild/core');
```

ESM/CJS interop is a tricky issue, so we will provide both formats for a long time to make it easier for more users to use.

## dataUriLimit Defaults

The default value for [output.dataUriLimit](/config/output/data-uri-limit) has been changed from `10000 (10kB)` to `4096 (4KiB)`.

This is because more applications are currently using HTTP 2.0, so splitting assets into separate files would perform better. Meanwhile, inlining assets over 4KiB can make the JS bundle to be too large and not cache friendly.

If you prefer the previous defaults, add the following config:

```js title="rsbuild.config.ts"
export default {
  output: {
    dataUriLimit: 10000,
  },
};
```
