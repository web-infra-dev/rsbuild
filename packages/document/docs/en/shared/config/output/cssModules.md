- **Type:**

```ts
type CssModules = {
  auto?: boolean | RegExp | ((resourcePath: string) => boolean);
  localIdentName?: string;
  exportLocalsConvention?: CssModuleLocalsConvention;
};
```

For custom CSS Modules configuration.

### cssModules.auto

The `auto` configuration option allows CSS modules to be automatically enabled based on their filenames.

- **Type:** `boolean | RegExp | ((resourcePath: string) => boolean)`
- **Default:** `undefined`

Type description:

- `undefined`: According to the [output.disableCssModuleExtension](https://rsbuild.dev/config/options/output.html#outputdisablecssmoduleextension) configuration option to determine which style files to enable CSS modules.
- `true`: enable CSS modules for all files matching `/\.module\.\w+$/i.test(filename)` regexp.
- `false`: disables CSS Modules.
- `RegExp`: enable CSS modules for all files matching `/RegExp/i.test(filename)` regexp.
- `function`: enable CSS Modules for files based on the filename satisfying your filter function check.

```ts
export default {
  output: {
    cssModules: {
      auto: (resource) => {
        return resource.includes('.module.') || resource.includes('shared/');
      },
    },
  },
};
```

### cssModules.exportLocalsConvention

Style of exported class names.

- **Type:**

```ts
type CssModuleLocalsConvention =
  | 'asIs'
  | 'camelCase'
  | 'camelCaseOnly'
  | 'dashes'
  | 'dashesOnly';
```

- **Default:** `'camelCase'`

Type description:

- `asIs` Class names will be exported as is.
- `camelCase` Class names will be camelized, the original class name will not to be removed from the locals.
- `camelCaseOnly` Class names will be camelized, the original class name will be removed from the locals.
- `dashes` Only dashes in class names will be camelized.
- `dashesOnly` Dashes in class names will be camelized, the original class name will be removed from the locals.

```ts
export default {
  output: {
    cssModules: {
      exportLocalsConvention: 'camelCaseOnly',
    },
  },
};
```

### cssModules.localIdentName

- **Type:** `string`
- **Default:**

```ts
// isProd indicates that the production build
const localIdentName = isProd
  ? '[local]-[hash:base64:6]'
  : '[path][name]__[local]-[hash:base64:6]';
```

Sets the format of the className generated by CSS Modules after compilation.

#### Default Value

`localIdentName` has different default values in development and production.

In a production, Rsbuild will generate shorter class names to reduce the bundle size.

```ts
import styles from './index.module.scss';

// In development, the value is `.src-index-module__header-xxxxxx`
// In production, the value is `.header-xxxxxx`
console.log(styles.header);
```

#### Template String

You can use the following template strings in `localIdentName`:

- `[name]` - the basename of the asset.
- `[local]` - original class.
- `[hash]` - the hash of the string.
- `[folder]` - the folder relative path.
- `[path]` - the relative path.
- `[file]` - filename and path.
- `[ext]` - extension with leading dot.
- `[hash:<hashDigest>:<hashDigestLength>]`: hash with hash settings.

:::tip
When using Rspack as the bundler, currently does not support custom `<hashDigest>`.
:::

#### Example

Set `localIdentName` to other value:

```ts
export default {
  output: {
    cssModules: {
      localIdentName: '[hash:base64:4]',
    },
  },
};
```
