# Use Rsbuild CLI

Rsbuild provides a lightweight CLI tool that includes basic commands such as `dev` and `build`. It is primarily used for building non-React projects.

- For React projects, we recommend using the Modern.js framework directly. Please refer to [Modern.js - Quick Start](https://modernjs.dev/en/guides/get-started/quick-start.html) for more information.
- For non-React projects, such as developing a Vue project, you can use the Rsbuild CLI tool to build your project.

## Install

You need to install the `@rsbuild/core` package:

import { PackageManagerTabs } from '@theme';

<PackageManagerTabs command="add @rsbuild/core -D" />

## Commands

Rsbuild CLI provides the following commands to help you quickly start a development server, build production-ready code, and more.

### rsbuild dev

The `rsbuild dev` command is used to start a local development server and compile the source code in the development environment.

```bash
Usage: rsbuild dev [options]

Options:
  -h, --help            display help for command
```

### rsbuild build

The `rsbuild build` command will build the outputs for production in the `dist/` directory by default.

```bash
Usage: rsbuild build [options]

Options:
  -h, --help            display help for command
```

### rsbuild serve

The `rsbuild serve` command is used to preview the production build outputs locally. Note that you need to execute the `rsbuild build` command beforehand to generate the corresponding outputs.

```bash
Usage: rsbuild serve [options]

Options:
  -h, --help            display help for command
```

## rsbuild inspect

The `rsbuild inspect` command is used to view the Rsbuild config and Rspack config of the project.

```bash
Usage: rsbuild inspect [options]

Options:
  --env <env>           view the configuration in the target environment (default: "development")
  --output <output>     Specify the path to output in the dist (default: "/")
  --verbose             Show the full function in the result
  -c --config <config>  specify the configuration file, which can be a relative or absolute path
  -h, --help            show command help
```

When you run the command `npx rsbuild inspect` in the project root directory, the following files will be generated in the `dist` directory of the project:

- `rsbuild.config.js`: Represents the Rsbuild configuration used during the build.
- `rspack.config.web.js`: Represents the Rspack configuration used during the build.

```bash
➜ npx rsbuild inspect

Inspect config succeed, open following files to view the content:

  - Rsbuild Config: /project/dist/rsbuild.config.js
  - Rspack Config (web): /project/dist/rspack.config.web.js
```

### Specifying Environment

By default, the inspect command outputs the configuration for the development environment. You can add the `--env production` option to output the configuration for the production environment:

```bash
rsbuild inspect --env production
```

### Verbose content

By default, the inspect command omits the content of functions in the configuration object. You can add the `--verbose` option to output the complete content of functions:

```bash
rsbuild inspect --verbose
```

### Multiple Targets

If the current project has multiple build targets, such as building browser artifact and Node.js artifact simultaneously, multiple Rspack configuration files will be generated in the `dist` directory.

```bash
➜ npx rsbuild inspect

Inspect config succeed, open following files to view the content:

  - Rsbuild Config: /project/dist/rsbuild.config.js
  - Rspack Config (web): /project/dist/rspack.config.web.js
  - Rspack Config (node): /project/dist/rspack.config.node.js
```

## Configuration

Rsbuild CLI will read the `rsbuild.config.ts` configuration file located in the root directory of your project by default. You can use [all the configuration options](/config/index) provided by Rsbuild in the configuration file.

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';

export default defineConfig({
  dev: {
    port: 8081,
  },
});
```

When you use Rspack as the bundler, there are some differences in configuration types between webpack and Rspack. Therefore, you need to specify the `'rspack'` generic for `defineConfig`:

```diff title="rsbuild.config.ts"
- export default defineConfig({
+ export default defineConfig<'rspack'>({
  // ...
});
```

## Build Entry

By default, Rsbuild CLI uses `src/index.(js|ts|jsx|tsx)` as the build entry. You can modify the build entry using the `source.entries` configuration option.

- **Type:**

```ts
type Entries = Record<string, string>;
```

- **Default:**

```ts
const defaultEntry = {
  index: 'src/index.(js|ts|jsx|tsx)',
};
```

- **Example:**

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';

export default defineConfig({
  source: {
    entries: {
      foo: './src/pages/foo/index.ts',
      bar: './src/pages/bar/index.ts',
    },
  },
});
```

## Registering Plugins

You can register Rsbuild plugins using the `plugins` option in `rsbuild.config.ts`.

For example, to register a Vue plugin:

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';

export default defineConfig({
  plugins: [pluginVue()],
});
```
