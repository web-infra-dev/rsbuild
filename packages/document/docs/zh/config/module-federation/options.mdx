# moduleFederation.options

- **类型：** `ModuleFederationConfig`
- **默认值：** `undefined`
- **版本：** `>= 0.4.0`

用于配置 Rspack 模块联邦插件。

## 介绍

在使用模块联邦时，我们推荐你使用 Rsbuild 提供的 `moduleFederation.options` 选项，这个选项会自动调整一些相关的配置，以保证模块联邦应用可以正确运行。

当你设置 `moduleFederation.options` 选项后，Rsbuild 会执行以下操作：

- 自动注册 [ModuleFederationPlugin](https://rspack.dev/config/plugins#containermodulefederationplugin) 插件，并将 `options` 的值透传给插件。
- 将 Rspack [output.publicPath](https://rspack.dev/config/output#outputpublicpath) 配置的默认值设置为 `'auto'`。
- 关闭 Rsbuild [performance.chunkSplit](/config/performance/chunk-split) 中 `split-by-experience` 相关的规则，因为这可能会与 shared modules 冲突，参考 [#3161](https://github.com/module-federation/module-federation-examples/issues/3161)。
- 关闭 remote entry 的 splitChunks 规则。

## 用法

`moduleFederation.options` 的类型与 Rspack 的 ModuleFederationPlugin 插件完全一致：

```ts title="rsbuild.config.ts"
export default defineConfig({
  moduleFederation: {
    options: {
      name: 'remote',
      // other options
    },
  },
});
```

请参考 [ModuleFederationPlugin](https://rspack.dev/config/plugins#containermodulefederationplugin) 文档来了解所有可用的选项。

## 示例

下面是一个最小示例：

- Remote App

```ts title="remote/rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';

export default defineConfig({
  server: {
    port: 3002,
  },
  moduleFederation: {
    options: {
      name: 'remote',
      exposes: {
        './Button': './src/Button',
      },
      filename: 'remoteEntry.js',
    },
  },
});
```

- Host App

```ts title="host/rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';

export default defineConfig({
  server: {
    port: 3002,
  },
  moduleFederation: {
    options: {
      name: 'host',
      remotes: {
        remote: 'remote@http://localhost:3002/remoteEntry.js',
      },
    },
  },
});
```

更多示例请查看：

- [Rsbuild - module-federation exmaple](https://github.com/web-infra-dev/rsbuild/tree/main/examples/module-federation)
- [module-federation/module-federation-examples](https://github.com/module-federation/module-federation-examples)
