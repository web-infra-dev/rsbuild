# Create React App

æœ¬ç« èŠ‚ä»‹ç»å¦‚ä½•å°† [Create React App](https://github.com/facebook/create-react-app)ï¼ˆç®€ç§° CRAï¼‰é¡¹ç›®è¿ç§»åˆ° Rsbuildã€‚

## å®‰è£…ä¾èµ–

é¦–å…ˆä½ éœ€è¦æŠŠ CRA çš„ npm ä¾èµ–æ›¿æ¢ä¸º Rsbuild çš„ä¾èµ–ã€‚

import { PackageManagerTabs } from '@theme';

ç§»é™¤ CRA çš„ä¾èµ–ï¼š

<PackageManagerTabs command="remove react-scripts" />

å®‰è£… Rsbuild çš„ä¾èµ–ï¼š

<PackageManagerTabs command="add @rsbuild/core @rsbuild/plugin-react -D" />

## æ›´æ–° npm scripts

ä¸‹ä¸€æ­¥ï¼Œä½ éœ€è¦æŠŠ package.json ä¸­çš„ npm scripts æ›´æ–°ä¸º Rsbuild çš„ CLI å‘½ä»¤ã€‚

```diff title="package.json"
{
  "scripts": {
-   "start": "react-scripts start",
-   "build": "react-scripts build",
-   "eject": "react-scripts eject"
+   "start": "rsbuild dev",
+   "build": "rsbuild build",
+   "preview": "rsbuild preview"
  }
}
```

:::tip
Rsbuild æœªé›†æˆæµ‹è¯•æ¡†æ¶ï¼Œå› æ­¤æ²¡æœ‰æä¾›ç”¨äºæ›¿æ¢ `react-scripts test` çš„å‘½ä»¤ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ Jest æˆ– Vitest ç­‰æµ‹è¯•æ¡†æ¶ã€‚
:::

## åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨ package.json çš„åŒçº§ç›®å½•ä¸‹åˆ›å»º Rsbuild çš„é…ç½®æ–‡ä»¶ `rsbuild.config.ts`ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```ts title="rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginReact } from '@rsbuild/plugin-react';

export default defineConfig({
  plugins: [pluginReact()],
});
```

## HTML æ¨¡æ¿

CRA é»˜è®¤ä½¿ç”¨ `public/index.html` æ–‡ä»¶ä½œä¸º HTML æ¨¡æ¿ã€‚åœ¨ Rsbuild ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ [html.template](/config/html/template) æ¥æŒ‡å®š HTML æ¨¡æ¿ï¼š

```ts title="rsbuild.config.ts"
export default defineConfig({
  html: {
    template: './public/index.html',
  },
});
```

åœ¨ HTML æ¨¡æ¿ä¸­ï¼Œå¦‚æœä½¿ç”¨äº† CRA çš„ `%PUBLIC_URL%` å˜é‡ï¼Œè¯·æ›¿æ¢ä¸º Rsbuild çš„ [assetPrefix å˜é‡](/config/html/template-parameters)ï¼Œå¹¶ä½¿ç”¨æ–œæ è¿›è¡Œè¿æ¥ï¼š

```diff
-  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
+  <link rel="icon" href="<%= assetPrefix %>/favicon.ico" />
```

è¿™æ ·å°±å®Œæˆäº†ä» CRA åˆ° Rsbuild çš„åŸºæœ¬è¿ç§»ï¼Œæ­¤æ—¶ä½ å¯ä»¥æ‰§è¡Œ `npm run start` å‘½ä»¤æ¥å°è¯•å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚

## ä½¿ç”¨ SVGR

å¦‚æœä½ ä½¿ç”¨äº† CRA çš„ "SVG è½¬ React ç»„ä»¶" åŠŸèƒ½ï¼ˆå³ [SVGR](https://react-svgr.com/)ï¼‰ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å®‰è£… Rsbuild çš„ SVGR æ’ä»¶ã€‚

æ¯”å¦‚ä½¿ç”¨äº†ä»¥ä¸‹ç”¨æ³•ï¼š

```jsx
import { ReactComponent as Logo } from './logo.svg';

const App = () => (
  <div>
    <Logo />
  </div>
);
```

è¯·å‚è€ƒ [SVGR æ’ä»¶](/plugins/list/plugin-svgr) æ–‡æ¡£äº†è§£å¦‚ä½•åœ¨ Rsbuild ä¸­ä½¿ç”¨ SVGRã€‚

## é…ç½®è¿ç§»

ä»¥ä¸‹æ˜¯ [CRA é…ç½®](https://create-react-app.dev/docs/advanced-configuration/)å¯¹åº”çš„ Rsbuild é…ç½®ï¼š

| CRA                     | Rsbuild                                                                                         |
| ----------------------- | ----------------------------------------------------------------------------------------------- |
| HOST                    | [server.host](/config/server/host)                                                              |
| PORT                    | [server.port](/config/server/port)                                                              |
| HTTPS                   | [server.https](/config/server/https)                                                            |
| WDS_SOCKET_HOST         | [dev.client.host](/config/dev/client)                                                           |
| WDS_SOCKET_PATH         | [dev.client.path](/config/dev/client)                                                           |
| WDS_SOCKET_PORT         | [dev.client.port](/config/dev/client)                                                           |
| PUBLIC_URL              | [dev.assetPrefix](/config/dev/asset-prefix) / [output.assetPrefix](/config/output/asset-prefix) |
| BUILD_PATH              | [output.distPath](/config/output/dist-path)                                                     |
| GENERATE_SOURCEMAP      | [output.sourceMap](/config/output/source-map)                                                   |
| IMAGE_INLINE_SIZE_LIMIT | [output.dataUriLimit](/config/output/data-uri-limit)                                            |
| FAST_REFRESH            | [dev.hmr](/config/dev/hmr)                                                                      |
| TSC_COMPILE_ON_ERROR    | [Type Check Plugin](/plugins/list/plugin-type-check)                                            |

è¯´æ˜ï¼š

- ä¸Šè¿°è¡¨æ ¼å°šæœªè¦†ç›–åˆ° CRA çš„æ‰€æœ‰é…ç½®ï¼Œæ¬¢è¿è¡¥å……ã€‚

## ç¼–è¯‘ node_modules

CRA é»˜è®¤ä¼šä½¿ç”¨ Babel ç¼–è¯‘ node_modules ä¸­çš„ä¾èµ–ï¼Œä½† Rsbuild åˆ™ä¸ä¼šï¼Œè¿™æ˜¯ä¸ºäº†é¿å…äºŒæ¬¡ç¼–è¯‘å¸¦æ¥çš„æ€§èƒ½æŸè€—å’Œæ½œåœ¨çš„ç¼–è¯‘é”™è¯¯ã€‚

å¦‚æœä½ éœ€è¦å¤„ç† node_modules ä¸­ä¾èµ–å¼•èµ·çš„è¯­æ³•å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ [source.include](/config/source/include#ç¼–è¯‘-node_modules) é…ç½®é¡¹æ¥ç¼–è¯‘ node_modulesã€‚

## ç¯å¢ƒå˜é‡

CRA é»˜è®¤ä¼šå°† `REACT_APP_` å¼€å¤´çš„ç¯å¢ƒå˜é‡æ³¨å…¥åˆ° client ä»£ç ä¸­ï¼Œè€Œ Rsbuild é»˜è®¤ä¼šæ³¨å…¥ `PUBLIC_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒ [public å˜é‡](/guide/advanced/env-vars#public-å˜é‡)ï¼‰ã€‚

ä¸ºäº†å…¼å®¹ CRA çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ Rsbuild æä¾›çš„ [loadEnv](/api/javascript-api/core#loadenv) æ–¹æ³•æ¥è¯»å– `REACT_APP_` å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶é€šè¿‡ [source.define](/config/source/define) é…ç½®é¡¹æ³¨å…¥åˆ° client ä»£ç ä¸­ã€‚

```ts title="rsbuild.config.ts"
import { defineConfig, loadEnv } from '@rsbuild/core';

const { publicVars } = loadEnv({ prefixes: ['REACT_APP_'] });

export default defineConfig({
  source: {
    define: publicVars,
  },
});
```

## å†…å®¹è¡¥å……

å½“å‰æ–‡æ¡£åªæ¶µç›–äº†è¿ç§»è¿‡ç¨‹çš„éƒ¨åˆ†äº‹é¡¹ï¼Œå¦‚æœä½ å‘ç°æœ‰åˆé€‚çš„å†…å®¹å¯ä»¥è¡¥å……ï¼Œæ¬¢è¿é€šè¿‡ pull request æ¥å®Œå–„æ–‡æ¡£ ğŸ¤ã€‚

> Rsbuild çš„æ–‡æ¡£ä½äº [rsbuild/packages/document](https://github.com/web-infra-dev/rsbuild/tree/main/packages/document) ç›®å½•ã€‚
