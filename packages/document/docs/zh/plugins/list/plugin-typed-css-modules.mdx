# Typed CSS Modules 插件

import { SourceCode } from 'rspress/theme';

<SourceCode href="https://github.com/web-infra-dev/rsbuild/tree/main/packages/plugin-typed-css-modules" />

{/* this plugin is still WIP */}

## 生成准确的类型定义

上述方法虽然可以解决 CSS Modules 在 TypeScript 中的类型问题，但是无法准确地提示出某个 CSS 文件导出了哪些类名。

Rsbuild 支持为 CSS Modules 生成准确的类型声明，你只需要开启 output.enableCssModuleTSDeclaration 配置项，再执行构建命令，Rsbuild 就会为项目中所有的 CSS Modules 文件生成相应的类型声明文件。

```ts
export default {
  output: {
    enableCssModuleTSDeclaration: true,
  },
};
```

### 示例

例如某个文件夹下面有 `src/index.ts` 和 `src/index.module.scss` 两个文件：

```tsx title="src/index.ts"
import styles from './index.module.scss';

export default () => {
  <div>
    <div className={styles.pageHeader}>Page Header</div>
  </div>;
};
```

```scss
// index.module.scss
.page-header {
  color: black;
}
```

执行构建命令后，会自动生成 `src/index.module.scss.d.ts` 类型声明文件：

```ts title="src/index.module.scss.d.ts"
// This file is automatically generated.
// Please do not change this file!
interface CssExports {
  'page-header': string;
  pageHeader: string;
}
export const cssExports: CssExports;
export default cssExports;
```

此时再打开 `src/index.ts` 文件，可以看到 `styles` 对象已经具备了准确的类型。
